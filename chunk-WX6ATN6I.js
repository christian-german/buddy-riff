import{j as W,k as z}from"./chunk-GOV3QCWE.js";import{$a as _,Ba as r,Eb as G,Fa as D,Fb as B,Gb as k,Ka as A,Oa as f,Va as a,Wa as h,Xa as j,Ya as N,Za as g,_a as s,ca as E,cb as d,gb as m,hb as C,ib as T,j as O,ka as w,nb as b,pb as $}from"./chunk-5RIKC5GB.js";var R={C:{name:"C Major",positions:[{string:1,fret:0},{string:2,fret:1,finger:1},{string:3,fret:0},{string:4,fret:2,finger:2},{string:5,fret:3,finger:3}],baseFret:1,mutedStrings:[6]},"C#":{name:"C# Major",positions:[{string:1,fret:4,finger:4},{string:2,fret:2,finger:2},{string:3,fret:1,finger:1},{string:4,fret:3,finger:3}],baseFret:4,mutedStrings:[5,6]},D:{name:"D Major",positions:[{string:1,fret:2,finger:2},{string:2,fret:3,finger:3},{string:3,fret:2,finger:1}],baseFret:1,mutedStrings:[5,6]},"D#":{name:"D# Major",positions:[{string:1,fret:3,finger:3},{string:2,fret:4,finger:4},{string:3,fret:3,finger:2},{string:4,fret:1,finger:1}],baseFret:3,mutedStrings:[5,6]},E:{name:"E Major",positions:[{string:1,fret:0},{string:2,fret:0},{string:3,fret:1,finger:1},{string:4,fret:2,finger:2},{string:5,fret:2,finger:3},{string:6,fret:0}],baseFret:1},F:{name:"F Major",positions:[{string:1,fret:1,finger:1},{string:2,fret:1,finger:1},{string:3,fret:2,finger:2},{string:4,fret:3,finger:3},{string:5,fret:3,finger:4},{string:6,fret:1,finger:1}],baseFret:1,barres:[{fromString:1,toString:6,fret:1}]},"F#":{name:"F# Major",positions:[{string:1,fret:2,finger:1},{string:2,fret:2,finger:1},{string:3,fret:3,finger:2},{string:4,fret:4,finger:4},{string:5,fret:4,finger:4},{string:6,fret:2,finger:1}],baseFret:1,barres:[{fromString:1,toString:6,fret:2}]},G:{name:"G Major",positions:[{string:1,fret:3,finger:3},{string:2,fret:0},{string:3,fret:0},{string:4,fret:0},{string:5,fret:2,finger:2},{string:6,fret:3,finger:4}],baseFret:1},"G#":{name:"G# Major",positions:[{string:1,fret:1,finger:1},{string:2,fret:1,finger:1},{string:3,fret:1,finger:1},{string:4,fret:3,finger:3},{string:5,fret:4,finger:4},{string:6,fret:1,finger:1}],baseFret:4,barres:[{fromString:1,toString:6,fret:1}]},A:{name:"A Major",positions:[{string:1,fret:0},{string:2,fret:2,finger:2},{string:3,fret:2,finger:3},{string:4,fret:2,finger:4},{string:5,fret:0}],baseFret:1,mutedStrings:[6]},"A#":{name:"A# Major",positions:[{string:1,fret:1,finger:1},{string:2,fret:3,finger:3},{string:3,fret:3,finger:4},{string:4,fret:3,finger:4},{string:5,fret:1,finger:1},{string:6,fret:1,finger:1}],baseFret:1,barres:[{fromString:1,toString:6,fret:1}]},B:{name:"B Major",positions:[{string:1,fret:2,finger:1},{string:2,fret:4,finger:3},{string:3,fret:4,finger:4},{string:4,fret:4,finger:4},{string:5,fret:2,finger:1},{string:6,fret:2,finger:1}],baseFret:1,barres:[{fromString:1,toString:6,fret:2}]},Cm:{name:"C Minor",positions:[{string:1,fret:3,finger:4},{string:2,fret:1,finger:2},{string:3,fret:0},{string:4,fret:2,finger:3},{string:5,fret:3,finger:4}],baseFret:3,mutedStrings:[6],barres:[{fromString:1,toString:5,fret:3}]},"C#m":{name:"C# Minor",positions:[{string:1,fret:1,finger:1},{string:2,fret:2,finger:2},{string:3,fret:3,finger:3},{string:4,fret:3,finger:4},{string:5,fret:1,finger:1},{string:6,fret:1,finger:1}],baseFret:4,barres:[{fromString:1,toString:6,fret:1}]},Dm:{name:"D Minor",positions:[{string:1,fret:1,finger:1},{string:2,fret:3,finger:3},{string:3,fret:2,finger:2},{string:4,fret:0}],baseFret:1,mutedStrings:[5,6]},"D#m":{name:"D# Minor",positions:[{string:1,fret:2,finger:2},{string:2,fret:4,finger:4},{string:3,fret:3,finger:3},{string:4,fret:1,finger:1}],baseFret:3,mutedStrings:[5,6]},Em:{name:"E Minor",positions:[{string:1,fret:0},{string:2,fret:0},{string:3,fret:0},{string:4,fret:2,finger:2},{string:5,fret:2,finger:3},{string:6,fret:0}],baseFret:1},Fm:{name:"F Minor",positions:[{string:1,fret:1,finger:1},{string:2,fret:1,finger:1},{string:3,fret:1,finger:1},{string:4,fret:3,finger:3},{string:5,fret:3,finger:4},{string:6,fret:1,finger:1}],baseFret:1,barres:[{fromString:1,toString:6,fret:1}]},"F#m":{name:"F# Minor",positions:[{string:1,fret:2,finger:1},{string:2,fret:2,finger:1},{string:3,fret:2,finger:1},{string:4,fret:4,finger:3},{string:5,fret:4,finger:4},{string:6,fret:2,finger:1}],baseFret:1,barres:[{fromString:1,toString:6,fret:2}]},Gm:{name:"G Minor",positions:[{string:1,fret:3,finger:3},{string:2,fret:3,finger:4},{string:3,fret:3,finger:4},{string:4,fret:5,finger:4},{string:5,fret:5,finger:4},{string:6,fret:3,finger:3}],baseFret:1,barres:[{fromString:1,toString:6,fret:3}]},"G#m":{name:"G# Minor",positions:[{string:1,fret:1,finger:1},{string:2,fret:1,finger:1},{string:3,fret:1,finger:1},{string:4,fret:3,finger:3},{string:5,fret:3,finger:4},{string:6,fret:1,finger:1}],baseFret:4,barres:[{fromString:1,toString:6,fret:1}]},Am:{name:"A Minor",positions:[{string:1,fret:0},{string:2,fret:1,finger:1},{string:3,fret:2,finger:2},{string:4,fret:2,finger:3},{string:5,fret:0}],baseFret:1,mutedStrings:[6]},"A#m":{name:"A# Minor",positions:[{string:1,fret:1,finger:1},{string:2,fret:2,finger:2},{string:3,fret:3,finger:3},{string:4,fret:3,finger:4},{string:5,fret:1,finger:1},{string:6,fret:1,finger:1}],baseFret:1,barres:[{fromString:1,toString:6,fret:1}]},Bm:{name:"B Minor",positions:[{string:1,fret:2,finger:1},{string:2,fret:3,finger:3},{string:3,fret:4,finger:4},{string:4,fret:4,finger:4},{string:5,fret:2,finger:1},{string:6,fret:2,finger:1}],baseFret:1,barres:[{fromString:1,toString:6,fret:2}]}};var q=()=>[0,1,2,3,4,5],H=()=>[0,1,2,3,4],J=()=>[];function K(i,o){if(i&1&&(g(0,"div",17),m(1),s()),i&2){let t=d(2);r(),T(" ",t.baseFret,"fr ")}}function L(i,o){i&1&&_(0,"div",18)}function Q(i,o){i&1&&_(0,"div",19)}function U(i,o){if(i&1&&(g(0,"div",20)(1,"div"),m(2),s()()),i&2){let t=o.$implicit,e=d(2);h("left",e.getStringPosition(t.string),"%")("top",e.getFretPosition(t.fret),"%"),r(),N(e.getNoteClass(t)),r(),C(t.finger||"")}}function V(i,o){if(i&1&&(g(0,"div",21),m(1," \u2715 "),s()),i&2){let t=o.$implicit,e=d(2);h("left",e.getStringPosition(t),"%")}}function X(i,o){if(i&1&&(g(0,"div",22),m(1," \u25CB "),s()),i&2){let t=o.$implicit,e=d(2);h("left",e.getStringPosition(t),"%")}}function Y(i,o){if(i&1&&_(0,"div",23),i&2){let t=o.$implicit,e=d(2);h("left",e.getStringPosition(t.toString),"%")("top",e.getFretPosition(t.fret),"%")("width",e.getBarreWidth(t.fromString,t.toString),"%")}}function Z(i,o){if(i&1&&(g(0,"div",3)(1,"div",4),f(2,K,2,1,"div",5),g(3,"div",6),f(4,L,1,0,"div",7),s(),g(5,"div",8),f(6,Q,1,0,"div",9),s(),g(7,"div",10),f(8,U,3,7,"div",11),s(),g(9,"div",12),f(10,V,2,2,"div",13),s(),g(11,"div",14),f(12,X,2,2,"div",15),s(),f(13,Y,1,6,"div",16),s()()),i&2){let t=d();r(2),a("ngIf",t.baseFret>1),r(2),a("ngForOf",b(7,q)),r(2),a("ngForOf",b(8,H)),r(2),a("ngForOf",t.currentPositions),r(2),a("ngForOf",t.mutedStrings),r(2),a("ngForOf",t.openStrings),r(),a("ngForOf",t.barres)}}function tt(i,o){if(i&1&&(g(0,"div",17),m(1),s()),i&2){let t=d().$implicit;r(),T(" ",t.baseFret,"fr ")}}function et(i,o){i&1&&_(0,"div",18)}function it(i,o){i&1&&_(0,"div",19)}function nt(i,o){if(i&1&&(g(0,"div",20)(1,"div"),m(2),s()()),i&2){let t=o.$implicit,e=d().$implicit,n=d(2);h("left",n.getStringPosition(t.string),"%")("top",n.getFretPosition(t.fret),"%"),r(),N(n.getNoteClass(t,e)),r(),C(t.finger||"")}}function rt(i,o){if(i&1&&(g(0,"div",21),m(1," \u2715 "),s()),i&2){let t=o.$implicit,e=d(3);h("left",e.getStringPosition(t),"%")}}function ot(i,o){if(i&1&&(g(0,"div",22),m(1," \u25CB "),s()),i&2){let t=o.$implicit,e=d(3);h("left",e.getStringPosition(t),"%")}}function st(i,o){if(i&1&&_(0,"div",23),i&2){let t=o.$implicit,e=d(3);h("left",e.getStringPosition(t.toString),"%")("top",e.getFretPosition(t.fret),"%")("width",e.getBarreWidth(t.fromString,t.toString),"%")}}function gt(i,o){if(i&1&&(g(0,"div",26)(1,"h4"),m(2),s(),g(3,"div",4),f(4,tt,2,1,"div",5),g(5,"div",6),f(6,et,1,0,"div",7),s(),g(7,"div",8),f(8,it,1,0,"div",9),s(),g(9,"div",10),f(10,nt,3,7,"div",11),s(),g(11,"div",12),f(12,rt,2,2,"div",13),s(),g(13,"div",14),f(14,ot,2,2,"div",15),s(),f(15,st,1,6,"div",16),s()()),i&2){let t=o.$implicit,e=d(2);j("playing",e.currentlyPlayingInversion===t),r(2),C(t.inversionType),r(2),a("ngIf",t.baseFret>1),r(2),a("ngForOf",b(10,q)),r(2),a("ngForOf",b(11,H)),r(2),a("ngForOf",t.positions),r(2),a("ngForOf",e.getMutedStrings(t)),r(2),a("ngForOf",e.getOpenStrings(t)),r(),a("ngForOf",t.barres||b(12,J))}}function at(i,o){if(i&1&&(g(0,"div",24),f(1,gt,16,13,"div",25),s()),i&2){let t=d();r(),a("ngForOf",t.currentInversions)}}var c=function(i){return i.Root="root",i.Third="third",i.Fifth="fifth",i.Other="other",i}(c||{}),Ft=(()=>{class i{constructor(t,e){this.audioService=t,this.cdr=e,this.diagramName="",this.diagramType="chord",this.autoPlay=!1,this.selectedInversion="All Types",this.playingComplete=new w,this.hasInversions=!1,this.currentPositions=[],this.mutedStrings=[],this.openStrings=[],this.barres=[],this.baseFret=1,this.currentInversions=[],this.currentlyPlayingInversion=null}ngOnChanges(t){(t.diagramName||t.diagramType||t.selectedInversion)&&(this.updateDiagram(),this.autoPlay&&this.hasInversions&&this.currentInversions.length>0&&this.audioService.loadInstrument().then(()=>{this.playAllInversions()}))}playAllInversions(){return O(this,null,function*(){if(!this.currentInversions||this.currentInversions.length===0){console.warn("No inversions to play"),this.playingComplete.emit();return}try{for(let t=0;t<this.currentInversions.length;t++){let e=this.currentInversions[t];this.currentlyPlayingInversion=e,this.cdr.detectChanges(),yield this.playInversion(e),t<this.currentInversions.length-1&&(yield new Promise(n=>setTimeout(n,500)))}this.currentlyPlayingInversion=null,this.cdr.detectChanges(),this.playingComplete.emit()}catch(t){console.error("Error playing inversions:",t),this.currentlyPlayingInversion=null,this.cdr.detectChanges(),this.playingComplete.emit()}})}playInversion(t){return O(this,null,function*(){return this.audioService.playTriadFromPositions(t.positions,t.baseFret,.8,0)})}getStringPosition(t){return(6-t)*20}getFretPosition(t){return t===0?0:t*20}getBarreWidth(t,e){return(e-t)*20+20}getMutedStrings(t){return t.muted||[]}getOpenStrings(t){let e=[];for(let n=1;n<=6;n++){let v=t.positions.some(l=>l.string===n),p=this.getMutedStrings(t).includes(n);!v&&!p&&e.push(n)}return e}getNoteType(t,e){if(!e||!e.positions||e.positions.length===0)return c.Other;let n=this.diagramName.replace(/-triad$/,""),v=n.endsWith("m"),p=v?n.slice(0,-1):n,l=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],u=l.indexOf(p),S=v?3:4,F=7,y=(u+S)%12,P=(u+F)%12,I=l[y],x=l[P],M=this.getNoteAtPosition(t.string,t.fret,e.baseFret);return M===p?c.Root:M===I?c.Third:M===x?c.Fifth:c.Other}getNoteAtPosition(t,e,n){let p=["E","A","D","G","B","E"][6-t],l=e+n-1,u=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],F=(u.indexOf(p)+l)%12;return u[F]}getNoteTypeForChord(t,e){let n=e.replace(/m$/,""),v=e.endsWith("m"),p=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],l=p.indexOf(n),u=v?3:4,S=7,F=(l+u)%12,y=(l+S)%12,P=p[F],I=p[y],x=this.getNoteAtPosition(t.string,t.fret,this.baseFret);return x===n?c.Root:x===P?c.Third:x===I?c.Fifth:c.Other}getNoteClass(t,e){return e?`dot ${this.getNoteType(t,e)}`:`dot ${this.getNoteTypeForChord(t,this.diagramName)}`}updateDiagram(){let t;if(this.diagramType==="triad"?t=W[this.diagramName]:t=R[this.diagramName],!t){console.warn(`Definition not found for: ${this.diagramName}`);return}if(this.hasInversions=this.diagramType==="triad"||!!t.inversions,this.hasInversions&&t.inversions)this.selectedInversion=="All Types"?this.currentInversions=t.inversions:this.currentInversions=t.inversions.filter(e=>e.inversionType===this.selectedInversion);else if(t.positions){this.currentPositions=t.positions,this.baseFret=t.baseFret??1,this.barres=t.barres||[],this.mutedStrings=t.mutedStrings||[],this.openStrings=[];for(let e=1;e<=6;e++){let n=this.currentPositions.some(p=>p.string===e),v=this.mutedStrings.includes(e);!n&&!v&&this.openStrings.push(e)}}}static{this.\u0275fac=function(e){return new(e||i)(D(z),D($))}}static{this.\u0275cmp=A({type:i,selectors:[["app-fretboard-diagram"]],inputs:{diagramName:"diagramName",diagramType:"diagramType",autoPlay:"autoPlay",selectedInversion:"selectedInversion"},outputs:{playingComplete:"playingComplete"},features:[E],decls:5,vars:3,consts:[[1,"fretboard-diagram-container"],["class","single-diagram",4,"ngIf"],["class","inversions-container",4,"ngIf"],[1,"single-diagram"],[1,"fretboard"],["class","fret-label",4,"ngIf"],[1,"strings"],["class","string",4,"ngFor","ngForOf"],[1,"frets"],["class","fret",4,"ngFor","ngForOf"],[1,"positions"],["class","position",3,"left","top",4,"ngFor","ngForOf"],[1,"muted-strings"],["class","muted",3,"left",4,"ngFor","ngForOf"],[1,"open-strings"],["class","open",3,"left",4,"ngFor","ngForOf"],["class","barre",3,"left","top","width",4,"ngFor","ngForOf"],[1,"fret-label"],[1,"string"],[1,"fret"],[1,"position"],[1,"muted"],[1,"open"],[1,"barre"],[1,"inversions-container"],["class","inversion",3,"playing",4,"ngFor","ngForOf"],[1,"inversion"]],template:function(e,n){e&1&&(g(0,"div",0)(1,"h3"),m(2),s(),f(3,Z,14,9,"div",1)(4,at,2,1,"div",2),s()),e&2&&(r(2),C(n.diagramName),r(),a("ngIf",!n.hasInversions),r(),a("ngIf",n.hasInversions))},dependencies:[k,G,B],styles:[".fretboard-diagram-container[_ngcontent-%COMP%]{display:inline-block;margin:10px;padding:15px;border:1px solid #ddd;border-radius:5px;background-color:#f9f9f9;text-align:center;max-width:800px}.inversions-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:20px;margin-top:20px}.inversion[_ngcontent-%COMP%]{display:inline-block;margin:10px;padding:10px;border:1px solid #eee;border-radius:5px;background-color:#fff;transition:all .3s ease}.inversion.playing[_ngcontent-%COMP%]{border:2px solid #4CAF50;box-shadow:0 0 10px #4caf5080;transform:scale(1.05)}h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px;font-size:1.5em}h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:30px;font-size:1.2em;color:#4caf50}.fretboard[_ngcontent-%COMP%]{position:relative;width:200px;height:250px;margin:0 auto}.strings[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:flex;justify-content:space-between}.string[_ngcontent-%COMP%]{width:2px;height:100%;background-color:#999}.frets[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between}.fret[_ngcontent-%COMP%]{width:100%;height:2px;background-color:#999}.positions[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.position[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%)}.dot[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700}.dot.root[_ngcontent-%COMP%]{background-color:#e53935}.dot.third[_ngcontent-%COMP%]{background-color:#1e88e5}.dot.fifth[_ngcontent-%COMP%]{background-color:#43a047}.dot.other[_ngcontent-%COMP%]{background-color:#757575}.muted-strings[_ngcontent-%COMP%]{position:absolute;width:100%;top:-30px;font-size:24px;font-weight:700}.open-strings[_ngcontent-%COMP%]{display:none}.muted[_ngcontent-%COMP%], .open[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%)}.barre[_ngcontent-%COMP%]{position:absolute;height:30px;background-color:#4caf50b3;border-radius:15px;transform:translate(-7%,-50%)}.fret-label[_ngcontent-%COMP%]{position:absolute;left:-30px;top:20%;font-weight:700;font-size:12px}"]})}}return i})();export{R as a,Ft as b};
