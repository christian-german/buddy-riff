import{a as P,b as w,c as S,d as O,h as k,l as I}from"./chunk-TCS3WO52.js";import{$a as d,Ba as r,Cb as v,Db as M,Ka as T,Oa as h,Va as l,Wa as f,Za as t,_a as n,bb as m,cb as p,db as a,eb as C,fb as _,gb as x,hb as b,ib as y}from"./chunk-MFIBNRNH.js";function E(o,u){if(o&1&&(t(0,"div",20),d(1,"div",21),n()),o&2){let e=p(2);r(),f("width",e.progressValue,"%")}}function D(o,u){if(o&1&&(t(0,"div",22),d(1,"app-fretboard-diagram",23),n()),o&2){let e=p(2);r(),l("diagramName",e.currentChord)}}function N(o,u){if(o&1&&(t(0,"div",16),h(1,E,2,2,"div",17),t(2,"div",18),a(3),n(),h(4,D,2,1,"div",19),n()),o&2){let e=p();r(),l("ngIf",!e.showSolution),r(2),C(e.currentChord),r(),l("ngIf",e.showSolution)}}var B=(()=>{class o{constructor(){this.isTraining=!1,this.isPaused=!1,this.currentChord="",this.showSolution=!1,this.progressValue=0,this.delayTime=10,this.pausedTimeRemaining=0,this.pauseStartTime=0,this.totalCycleTime=0,this.chords=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B","Cm","C#m","Dm","D#m","Em","Fm","F#m","Gm","G#m","Am","A#m","Bm"]}startTraining(){this.isTraining=!0,this.isPaused=!1,this.showNextChord(),this.totalCycleTime=(this.delayTime+5)*1e3,this.timer=setInterval(()=>{this.showNextChord()},this.totalCycleTime)}pauseTraining(){if(!(!this.isTraining||this.isPaused)){if(this.isPaused=!0,this.pauseStartTime=Date.now(),this.timer&&clearInterval(this.timer),this.solutionTimer){if(!this.showSolution){let e=this.progressValue/100*(this.delayTime*1e3);this.pausedTimeRemaining=this.delayTime*1e3-e}clearTimeout(this.solutionTimer)}this.progressTimer&&clearInterval(this.progressTimer)}}resumeTraining(){if(!(!this.isTraining||!this.isPaused)){if(this.isPaused=!1,!this.showSolution&&this.pausedTimeRemaining>0){this.solutionTimer=setTimeout(()=>{this.showSolution=!0},this.pausedTimeRemaining);let e=Date.now()-this.progressValue/100*(this.delayTime*1e3);this.setupProgressTimer(e,this.delayTime*1e3);let s=this.totalCycleTime-(Date.now()-this.pauseStartTime);this.timer=setTimeout(()=>{this.showNextChord(),this.totalCycleTime=(this.delayTime+5)*1e3,this.timer=setInterval(()=>{this.showNextChord()},this.totalCycleTime)},s)}else if(this.showSolution){let s=Date.now()-this.pauseStartTime,i=Math.max(0,5e3-s);this.timer=setTimeout(()=>{this.showNextChord(),this.totalCycleTime=(this.delayTime+5)*1e3,this.timer=setInterval(()=>{this.showNextChord()},this.totalCycleTime)},i)}}}stopTraining(){this.isTraining=!1,this.isPaused=!1,this.currentChord="",this.showSolution=!1,this.progressValue=0,this.pausedTimeRemaining=0,this.timer&&(clearInterval(this.timer),clearTimeout(this.timer)),this.solutionTimer&&clearTimeout(this.solutionTimer),this.progressTimer&&clearInterval(this.progressTimer)}setupProgressTimer(e,s){this.progressTimer&&clearInterval(this.progressTimer),this.progressTimer=setInterval(()=>{let i=Date.now()-e;this.progressValue=Math.min(i/s*100,100),this.progressValue>=100&&clearInterval(this.progressTimer)},100)}showNextChord(){this.solutionTimer&&clearTimeout(this.solutionTimer),this.progressTimer&&clearInterval(this.progressTimer),this.showSolution=!1,this.progressValue=0,this.currentChord=this.getRandomChord();let e=this.delayTime*1e3;this.solutionTimer=setTimeout(()=>{this.showSolution=!0},e);let s=Date.now();this.setupProgressTimer(s,e),this.totalCycleTime=(this.delayTime+5)*1e3}getRandomChord(){let e=Math.floor(Math.random()*this.chords.length);return this.chords[e]}static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275cmp=T({type:o,selectors:[["app-chord-trainer"]],decls:36,vars:7,consts:[[1,"trainer-container"],[1,"controls"],[1,"control-button","start",3,"click","disabled"],[1,"control-button","pause",3,"click","disabled"],[1,"control-button","resume",3,"click","disabled"],[1,"control-button","stop",3,"click","disabled"],[1,"note-legend"],[1,"legend-item"],[1,"legend-color","root"],[1,"legend-color","third"],[1,"legend-color","fifth"],[1,"legend-color","other"],[1,"time-control"],["for","delaySlider"],["id","delaySlider","max","20","min","1","step","1","type","range",3,"ngModelChange","ngModel"],["class","chord-display",4,"ngIf"],[1,"chord-display"],["class","progress-bar-container",4,"ngIf"],[1,"chord-name"],["class","chord-diagram",4,"ngIf"],[1,"progress-bar-container"],[1,"progress-bar"],[1,"chord-diagram"],["diagramType","chord",3,"diagramName"]],template:function(s,i){s&1&&(t(0,"div",0)(1,"h2"),a(2,"Chord Trainer"),n(),t(3,"div",1)(4,"button",2),m("click",function(){return i.startTraining()}),a(5,"Start"),n(),t(6,"button",3),m("click",function(){return i.pauseTraining()}),a(7,"Pause"),n(),t(8,"button",4),m("click",function(){return i.resumeTraining()}),a(9,"Resume"),n(),t(10,"button",5),m("click",function(){return i.stopTraining()}),a(11,"Stop"),n()(),t(12,"div",6)(13,"h4"),a(14,"Note Colors"),n(),t(15,"div",7),d(16,"div",8),t(17,"span"),a(18,"Root Note"),n()(),t(19,"div",7),d(20,"div",9),t(21,"span"),a(22,"Third"),n()(),t(23,"div",7),d(24,"div",10),t(25,"span"),a(26,"Fifth"),n()(),t(27,"div",7),d(28,"div",11),t(29,"span"),a(30,"Other Notes"),n()()(),t(31,"div",12)(32,"label",13),a(33),n(),t(34,"input",14),y("ngModelChange",function(g){return b(i.delayTime,g)||(i.delayTime=g),g}),n()(),h(35,N,5,3,"div",15),n()),s&2&&(r(4),l("disabled",i.isTraining),r(2),l("disabled",!i.isTraining||i.isPaused),r(2),l("disabled",!i.isTraining||!i.isPaused),r(2),l("disabled",!i.isTraining),r(23),_("Delay time: ",i.delayTime," seconds"),r(),x("ngModel",i.delayTime),r(),l("ngIf",i.isTraining))},dependencies:[M,v,k,P,O,w,S,I],styles:[".trainer-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;text-align:center}h2[_ngcontent-%COMP%]{color:#333;margin-bottom:30px}.controls[_ngcontent-%COMP%]{margin-bottom:30px}.control-button[_ngcontent-%COMP%]{padding:10px 20px;margin:0 10px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.start[_ngcontent-%COMP%]{background-color:#00f;color:#fff}.pause[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.resume[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.stop[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.control-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.chord-display[_ngcontent-%COMP%]{margin-top:40px}.chord-name[_ngcontent-%COMP%]{font-size:72px;font-weight:700;margin-bottom:40px}.chord-diagram[_ngcontent-%COMP%]{margin-top:20px;padding:20px;border:1px solid #ddd;border-radius:8px}.progress-bar-container[_ngcontent-%COMP%]{width:100%;height:5px;background-color:#e0e0e0;border-radius:2px;margin-bottom:20px;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{height:100%;background-color:#4caf50;transition:width .1s linear}.time-control[_ngcontent-%COMP%]{margin:20px auto;max-width:400px;text-align:center}.time-control[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-size:16px;color:#333}.time-control[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{width:100%;height:10px;-webkit-appearance:none;background:#e0e0e0;border-radius:5px;outline:none}.time-control[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:20px;height:20px;background:#4caf50;border-radius:50%;cursor:pointer}.time-control[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]:disabled{opacity:.5}.note-legend[_ngcontent-%COMP%]{position:fixed;right:20px;top:50%;transform:translateY(-50%);background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000001a;z-index:100;text-align:left}.note-legend[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:15px;color:#333;font-size:16px;text-align:center}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.legend-color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;margin-right:10px}.legend-color.root[_ngcontent-%COMP%]{background-color:#e53935}.legend-color.third[_ngcontent-%COMP%]{background-color:#1e88e5}.legend-color.fifth[_ngcontent-%COMP%]{background-color:#43a047}.legend-color.other[_ngcontent-%COMP%]{background-color:#757575}"]})}}return o})();export{B as ChordTrainerComponent};
